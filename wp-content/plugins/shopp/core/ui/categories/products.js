jQuery(document).ready(function(){var a=jqnc();a.fn.dragrow=function(b){var e=a(this),c=e.find("tbody > tr"),f=typeof a(document).attr("onselectstart")!="undefined",d={onDrop:function(){}},b=a.extend(d,b);return c.bind("mousedown.dragrow",function(h){var g=a(this).fadeTo("fast",0.4);lastY=h.pageY;a("tr",g.parent()).not(g).bind("mouseenter.dragrow",function(){var i=a(this);if(h.pageY>lastY){i.after(g)}else{i.before(g)}lastY=h.pageY});a("body").bind("mouseup.dragrow",function(){g.fadeTo("fast",1);a("tr",g.parent()).unbind("mouseenter.dragrow");a("body").unbind("mouseup.dragrow");if(f){a(document).unbind("selectstart")}b.onDrop(g)});h.preventDefault();if(f){a(document).bind("selectstart",function(){return false})}return false}).css("cursor","move")};a.fn.arrangeRows=function(c){var d=a(this);d.dragrow({onDrop:b});b();d.find("button[name=top]").hover(function(){a(this).toggleClass("hover")}).click(function(){var f=a(this).parent().parent(),e=f.find("input[name^=position]");if(e.val()==0){return false}f.insertBefore(f.parent().find("tr:first"));b()});d.find("button[name=bottom]").hover(function(){a(this).toggleClass("hover")}).click(function(){var f=a(this).parent().parent(),e=f.find("input[name^=position]");f.insertAfter(f.parent().find("tr:last"));b()});function b(){var f=a("#category-id"),e=d.find("th.column-move img");d.find("tbody tr input[name^=position]").each(function(j,i){var h=a(i),g=j+1;if((h.attr("alt")!=""&&g!=h.attr("alt"))||h.val()=="0"){h.val(g).attr("alt",g);f=f.add(h)}else{if(h.attr("alt")==""){h.val(g).attr("alt",g)}else{h.val(g)}}});if(f.size()==1){return}e.hide().show();a.ajax({url:updates_url+"&action=shopp_category_products_order",timeout:3000,type:"POST",datatype:"text",data:f.serialize(),success:function(g){e.hide()}})}};a("#arrange-products").arrangeRows()});